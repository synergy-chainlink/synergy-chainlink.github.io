(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{81700:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rusd",function(){return r(274)}])},55581:function(e,n,r){"use strict";var l=r(85893),t=r(74855),a=r(17006),o=r(7158),s=r(89884),i=r(50053),d=r(58918),c=r(13289),u=r(81),h=r(67294),x=r(6213),m=r(41664),j=r.n(m);let Z=h.forwardRef((e,n)=>{let{as:r,href:t,...a}=e;return(0,l.jsx)(j(),{href:t,as:r,legacyBehavior:!0,children:(0,l.jsx)("a",{ref:n,...a})})}),g={padding:"0 15px 0 15px",color:"#FFF"},p=()=>{let[e,n]=h.useState("ethereum");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(x.J.Provider,{value:x.Z[e],children:[(0,l.jsx)(d.Z,{size:"lg",label:"Network",data:b,style:{width:300,minWidth:250},onChange:n,cleanable:!1,defaultValue:e,searchable:!1}),"\xa0",(()=>{let n=x.Z[e].showWallet();return(0,l.jsx)("div",{children:n?(0,l.jsxs)(i.Z,{color:"green",appearance:"ghost",style:{borderColor:"#6474a7",color:"rgba(255, 255, 255, 0.9"},children:[n.network_currency_symbol,"\xa0",n.network_currency_amount,"\xa0(",n.address.slice(0,5),"..",n.address.slice(n.address.length-5,n.address.length),")"]}):x.Z[e].connectButton()})})()]})})},b=[{label:(0,l.jsx)("span",{children:"Ethereum (Goerli)"}),value:"ethereum"}],w=e=>{let{children:n,active:r,...i}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.Z,{style:{backgroundColor:"#21273a"},children:[(0,l.jsxs)(u.Z,{activeKey:r,children:[(0,l.jsx)(u.Z.Item,{as:Z,href:"/",active:"home"==r,style:g,icon:(0,l.jsx)(t.Z,{}),children:"Home"}),(0,l.jsx)(u.Z.Item,{as:Z,href:"/trading",active:"trading"==r,style:g,icon:(0,l.jsx)(s.Z,{}),children:"Trading"}),(0,l.jsx)(u.Z.Item,{as:Z,href:"/rusd",active:"rusd"==r,style:g,icon:(0,l.jsx)(a.Z,{}),children:"Mint/Burn rUSD"}),(0,l.jsx)(u.Z.Item,{as:Z,href:"/faucet",active:"faucet"==r,style:g,icon:(0,l.jsx)(o.Z,{}),children:"Faucet"})]}),(0,l.jsx)(u.Z,{pullRight:!0,children:(0,l.jsx)(u.Z.Item,{children:(0,l.jsx)(p,{})})})]}),n]})};n.Z=w},6213:function(e,n,r){"use strict";r.d(n,{J:function(){return o}});var l=r(67294),t=r(67919);let a={ethereum:new t.ZP},o=l.createContext(a.ethereum);n.Z=a},274:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return H}});var l=r(85893),t=r(55581),a=r(6213),o=r(67294),s=r(3365),i=r(39987),d=r(17988),c=r(3718),u=r(77349),h=r(15715),x=r(4647),m=r(50053),j=r(3944),Z=r(58918),g=r(22543),p=r(20901),b=r(3779),w=r(2593);let C=()=>{let e=(0,o.useContext)(a.J),n=e.getRawBalance(),r=e.getRawInsuranceAllowance(),[t,Z]=o.useState(n||new b.Z(w.O$.from(0),18)),g=e.getUserInssurances(),C=new Date(new Date().setMonth(new Date().getMonth()+2)),[f,y]=o.useState(C),v=(0,s.Z)(),H=e.stakeRawCallback(t,f,(0,p.lZ)(v)),S=e.getNewRawAllowanceCallback(t,(0,p.lZ)(v));return(0,l.jsxs)(i.Z,{bordered:!0,shaded:!0,header:"Staking",children:[(0,l.jsxs)("p",{children:["Stake RAW tokens to insure your collateral from debt pool losses. The longer the lock time, the greater the percentage of your insurance can be reimbursed (min 30 days, max 730 days).",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{color:"orange"},children:"WARNING: Insurance can be returned only after the expiration of the lock."})]}),(0,l.jsx)("hr",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"RAW amount"}),(0,l.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,l.jsx)(c.Z.Button,{onClick:()=>Z(new b.Z(t.amount.sub(w.O$.from(10).pow(t.decimals+1)),t.decimals)),children:"-"}),(0,l.jsx)(u.Z,{className:"no-arrows-input-number",value:t.toHumanString(2),onChange:e=>Z(b.Z.fromString("string"==typeof e?e:e.toString(),t.decimals))}),(0,l.jsx)(c.Z.Button,{onClick:()=>Z(new b.Z(t.amount.add(w.O$.from(10).pow(t.decimals+1)),t.decimals)),children:"+"})]}),(0,l.jsxs)(d.Z.HelpText,{children:["Balance: ",null==n?void 0:n.toHumanString(4)]}),(0,l.jsxs)(d.Z.HelpText,{children:["Allowance: ",null==r?void 0:r.toHumanString(4)]})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"Unlock date"}),(0,l.jsx)(h.Z,{style:{marginTop:5,marginBottom:5},format:"yyyy-MM-dd",ranges:[],block:!0,defaultValue:C,onChange:y})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(x.Z,{justified:!0,children:[(0,l.jsx)(m.Z,{style:{backgroundColor:"#089a81",borderWidth:2},appearance:"primary",color:"green",disabled:parseFloat(null==r?void 0:r.toHumanString(18))>=parseFloat(null==t?void 0:t.toHumanString(18)),onClick:async()=>S(),children:(0,l.jsx)("b",{children:"Approve"})}),(0,l.jsx)(m.Z,{style:{backgroundColor:"#089a81",borderWidth:2},disabled:parseFloat(null==r?void 0:r.toHumanString(18))<parseFloat(null==t?void 0:t.toHumanString(18)),appearance:"primary",color:"green",onClick:async()=>H(),children:(0,l.jsx)("b",{children:"Stake"})})]}),(0,l.jsx)("hr",{}),(0,l.jsxs)(j.Z,{rowHeight:60,autoHeight:!0,style:{borderRadius:10},cellBordered:!0,data:g,renderEmpty:()=>(0,l.jsxs)("span",{style:{alignContent:"center"},children:[(0,l.jsx)("br",{}),"No any insurances"]}),children:[(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:170,align:"left",fixed:!0,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"ID"}),(0,l.jsx)(j.Z.Cell,{dataKey:"id"})]}),(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:100,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"RAW Locked"}),(0,l.jsx)(j.Z.Cell,{dataKey:"rawLocked"})]}),(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:200,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"Locked At"}),(0,l.jsx)(j.Z.Cell,{dataKey:"lockedAt"})]}),(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"Available At"}),(0,l.jsx)(j.Z.Cell,{dataKey:"availableAt"})]}),(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"RAW Repaid"}),(0,l.jsx)(j.Z.Cell,{dataKey:"rawRepaid"})]}),(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"Available RAW Compensation"}),(0,l.jsx)(j.Z.Cell,{dataKey:"availableCompensationString"})]}),(0,l.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,l.jsx)(j.Z.HeaderCell,{children:"#"}),(0,l.jsx)(j.Z.Cell,{dataKey:"unstakeButton"})]})]})]})},f=()=>{let e=o.useContext(a.J),n=(0,s.Z)(),r=e.getWethAllowance(),t=e.getRusdBalance(),h=e.getWethBalance(),[j,Z]=o.useState(h||new b.Z(w.O$.from(0),18)),[g,C]=o.useState(t||new b.Z(w.O$.from(0),18)),f=e.getNewWethAllowanceCallback(j,(0,p.lZ)(n)),y=e.getMintCallback(g,j,(0,p.lZ)(n));return(0,l.jsxs)(i.Z,{bordered:!0,shaded:!0,header:"Mint rUSD",children:[(0,l.jsx)("p",{children:"Deposit WETH as a collateral and get rUSD in return. Resulting collateral ratio should be greater than min collateral ratio"}),(0,l.jsx)("hr",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"rUSD amount"}),(0,l.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,l.jsx)(c.Z.Button,{onClick:()=>C(new b.Z(g.amount.sub(w.O$.from(10).pow(18)),g.decimals)),children:"-"}),(0,l.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:null==g?void 0:g.toHumanString(18),onChange(e){console.log("DOT",e,b.Z.fromString("string"==typeof e?e:e.toString(),18).toHumanString(18)),C(b.Z.fromString("string"==typeof e?e:e.toString(),18))}}),(0,l.jsx)(c.Z.Button,{onClick:()=>C(new b.Z(g.amount.add(w.O$.from(10).pow(18)),18)),children:"+"})]}),(0,l.jsxs)(d.Z.HelpText,{children:["Balance: ",null==t?void 0:t.toHumanString(5)]})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"WETH amount"}),(0,l.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,l.jsx)(c.Z.Button,{onClick:()=>Z(new b.Z(j.amount.sub(w.O$.from(10).pow(j.decimals-1)),j.decimals)),children:"-"}),(0,l.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:j.toHumanString(18),onChange:e=>Z(b.Z.fromString("string"==typeof e?e:e.toString(),j.decimals))}),(0,l.jsx)(c.Z.Button,{onClick:()=>Z(new b.Z(j.amount.add(w.O$.from(10).pow(j.decimals-1)),j.decimals)),children:"+"})]}),(0,l.jsxs)(d.Z.HelpText,{children:["Balance: ",null==h?void 0:h.toHumanString(6)]}),(0,l.jsxs)(d.Z.HelpText,{children:["Allowance: ",null==r?void 0:r.toHumanString(2)]}),(0,l.jsx)("hr",{}),(0,l.jsxs)(d.Z.HelpText,{children:["Current C-ratio: ",e.getCurrentCRatio(),"%"]}),(0,l.jsxs)(d.Z.HelpText,{children:["New C-ratio:"," ",e.predictCollateralRatio(g,j,!0),"%"]}),(0,l.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",e.getMinCRatio(),"%"]})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(x.Z,{justified:!0,children:[(0,l.jsx)(m.Z,{appearance:"ghost",disabled:parseFloat(null==r?void 0:r.toHumanString(18))>=parseFloat(null==j?void 0:j.toHumanString(18)),style:{marginBottom:7,borderWidth:2},onClick:async()=>f(),children:(0,l.jsx)("b",{children:"Approve"})}),(0,l.jsx)(m.Z,{appearance:"ghost",disabled:parseFloat(null==r?void 0:r.toHumanString(18))<parseFloat(null==j?void 0:j.toHumanString(18)),style:{marginBottom:7,borderWidth:2},async onClick(){console.log(123123),y()},children:(0,l.jsx)("b",{children:"Mint"})})]})]})},y=()=>{var e;let n=o.useContext(a.J),r=n.getRusdBalance(),t=n.getWethBalance(),h=n.wethLocked(),x=n.rawRepay(),j=n.getRawPrice(),g=n.getMinCRatio(),C=n.userDebt();new b.Z(w.O$.from(0),18);let[f,y]=o.useState(r||new b.Z(w.O$.from(0),18)),v=(0,s.Z)(),[H,S]=o.useState(t||new b.Z(w.O$.from(0),18)),[k,B]=o.useState(null),T=n.getUserInssurances(),A=n.predictCollateralRatio(new b.Z(w.O$.from(0),18),H,!1),W=n.predictCollateralRatio(f,new b.Z(w.O$.from(0),18),!1),R=n.getBurnRusdCallback(f,k||"0x0000000000000000000000000000000000000000000000000000000000000000",(0,p.lZ)(v)),I=n.unlockWethCallback(H,(0,p.lZ)(v));return(0,l.jsxs)(i.Z,{bordered:!0,shaded:!0,header:"Burn rUSD",children:[(0,l.jsx)("p",{children:"Burn rUSD to increase your collateral ratio and get ability to withdraw collateral in WETH. You can choose insurance to repay your debt pool losses in RAW."}),(0,l.jsx)("hr",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"Burn rUSD amount"}),(0,l.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,l.jsx)(c.Z.Button,{onClick:()=>y(new b.Z(f.amount.sub(w.O$.from(10).pow(f.decimals)),f.decimals)),children:"-"}),(0,l.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:f.toHumanString(18),onChange:e=>y(b.Z.fromString("string"==typeof e?e:e.toString(),f.decimals))}),(0,l.jsx)(c.Z.Button,{onClick:()=>y(new b.Z(f.amount.add(w.O$.from(10).pow(f.decimals)),f.decimals)),children:"+"})]}),(0,l.jsxs)(d.Z.HelpText,{children:["Current balance: ",null==r?void 0:r.toHumanString(2)]}),(0,l.jsxs)(d.Z.HelpText,{children:["New balance: ",new b.Z(null!==(e=null==r?void 0:r.amount.sub(null==f?void 0:f.amount))&&void 0!==e?e:w.O$.from(0),18).toHumanString(2)]}),(0,l.jsxs)(d.Z.HelpText,{children:["Your rUSD debt: ",null==C?void 0:C.toHumanString(2)]})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"Insurance rUSD amount"}),(0,l.jsx)("div",{style:{marginTop:5,marginBottom:5},children:(0,l.jsx)(Z.Z,{label:"Insurance",data:T.map(e=>{var n;return{label:"".concat(e.id.slice(0,6),"... (Max: ").concat(null===(n=e.availableCompensation)||void 0===n?void 0:n.toHumanString(4)," RAW)"),value:e.id}}),onChange:B,block:!0,defaultValue:"0x0000000000000000000000000000000000000000000000000000000000000000"})}),(0,l.jsxs)(d.Z.HelpText,{children:["Max RAW compensation: ",j&&x?x.amount.div(j.amount).toNumber():0," (",null==x?void 0:x.toHumanString(4),"$, price: ",null==j?void 0:j.toHumanString(5),"$)"]}),(0,l.jsxs)(d.Z.HelpText,{children:["New C-ratio: ",W,"%"]}),(0,l.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",g,"%"]})]}),(0,l.jsx)("br",{}),(0,l.jsx)(m.Z,{color:"orange",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2},onClick:async()=>R(),children:(0,l.jsx)("b",{children:"Burn rUSD"})}),(0,l.jsx)("hr",{}),(0,l.jsx)("p",{children:"Withdraw WETH collateral (this decreases collateral ratio)."}),(0,l.jsx)("br",{}),(0,l.jsxs)(d.Z.Group,{controlId:"_",children:[(0,l.jsx)(d.Z.ControlLabel,{children:"Unlock WETH"}),(0,l.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,l.jsx)(c.Z.Button,{onClick:()=>S(new b.Z(H.amount.sub(w.O$.from(10).pow(H.decimals-1)),H.decimals)),children:"-"}),(0,l.jsx)(u.Z,{className:"no-arrows-input-number",step:.01,value:H.toHumanString(18),onChange:e=>S(b.Z.fromString("string"==typeof e?e:e.toString(),H.decimals))}),(0,l.jsx)(c.Z.Button,{onClick:()=>S(new b.Z(H.amount.add(w.O$.from(10).pow(H.decimals-1)),H.decimals)),children:"+"})]}),(0,l.jsxs)(d.Z.HelpText,{children:["Locked WETH Amount: ",null==h?void 0:h.toHumanString(5)]}),(0,l.jsxs)(d.Z.HelpText,{children:["Current balance: ",null==t?void 0:t.toHumanString(5)]}),(0,l.jsxs)(d.Z.HelpText,{children:["New C-ratio: ",A,"%"]}),(0,l.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",g,"%"]})]}),(0,l.jsx)("br",{}),(0,l.jsx)(m.Z,{color:"violet",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2,borderColor:"#b6a1e3",color:"#b6a1e3"},onClick:async()=>I(),children:(0,l.jsx)("b",{children:"Withdraw WETH"})})]})},v=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Z,{justify:"space-around",children:(0,l.jsx)(g.Z.Item,{colspan:23,children:(0,l.jsx)(C,{})})}),(0,l.jsx)("br",{}),(0,l.jsxs)(g.Z,{justify:"space-around",children:[(0,l.jsx)(g.Z.Item,{colspan:11,children:(0,l.jsx)(f,{})}),(0,l.jsx)(g.Z.Item,{colspan:11,children:(0,l.jsx)(y,{})})]})]});function H(){return(0,l.jsx)(t.Z,{active:"rusd",children:(0,l.jsx)("div",{style:{padding:20},children:(0,l.jsx)(v,{})})})}}},function(e){e.O(0,[801,681,358,774,888,179],function(){return e(e.s=81700)}),_N_E=e.O()}]);